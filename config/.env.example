# Environment Configuration Example
# Copy this file to config/.env and update with your actual values
# All variables marked as (required) MUST be set for the bot to start
# Variables marked as (optional) have default values and can be omitted

# =============================================================================
# ENVIRONMENT
# =============================================================================
# Environment mode (optional, default: development)
# Controls application behavior, logging verbosity, and error handling
# - development: Verbose logging, detailed errors, hot reload support
# - test: In-memory database, mocked external services, minimal logging
# - staging: Production-like environment for final testing
# - production: Optimized performance, error notifications, minimal logging
# Valid values: development, test, staging, production
ENV=development

# =============================================================================
# TELEGRAM BOT CONFIGURATION
# =============================================================================
# Bot token from @BotFather (REQUIRED)
# This is the authentication token for your Telegram bot
# How to get: Message @BotFather on Telegram, create a new bot or use /token
# Format: <bot_id>:<auth_token> (numeric ID followed by colon and alphanumeric token)
# Example: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz-1234567890
# Security: Never commit this token to version control or share it publicly
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz-1234567890

# Telegram ID of the bot administrator (REQUIRED)
# This user will have access to admin commands and receive error notifications
# Used for: Admin panel access, system alerts, critical error notifications
# How to get your ID: Message @userinfobot on Telegram
# Format: Numeric Telegram user ID (typically 9-10 digits)
# Example: 123456789
ADMIN_TELEGRAM_ID=123456789

# =============================================================================
# DATABASE
# =============================================================================
# Database connection URL (REQUIRED)
# Specifies the database type, credentials, host, and database name
# The bot stores user data, transactions, game results, and configuration here
# 
# Format: <dialect>+<driver>://<username>:<password>@<host>:<port>/<database>
# 
# SQLite (recommended for development/small deployments):
#   sqlite:///data/bot.db (relative path)
#   sqlite:////absolute/path/to/bot.db (absolute path)
#   Note: Creates file automatically, no server needed
# 
# PostgreSQL (recommended for production):
#   postgresql://username:password@localhost:5432/botdb
#   postgresql+psycopg2://user:pass@host:5432/db (with specific driver)
# 
# MySQL/MariaDB:
#   mysql+pymysql://username:password@localhost:3306/botdb
#   Note: Requires pymysql driver (pip install pymysql)
DATABASE_URL=sqlite:///data/bot.db

# Database connection pool settings (optional)
# Controls how many simultaneous database connections are maintained
# Only relevant for PostgreSQL/MySQL, ignored for SQLite

# Maximum number of persistent connections in the pool (optional, default: 5)
# Increase for high-traffic bots with many concurrent users
DB_POOL_SIZE=5

# Maximum overflow connections beyond pool_size (optional, default: 10)
# Temporary connections created when pool is exhausted
# Total max connections = DB_POOL_SIZE + DB_MAX_OVERFLOW
DB_MAX_OVERFLOW=10

# Connection timeout in seconds (optional, default: 30)
# How long to wait for an available connection before raising an error
DB_POOL_TIMEOUT=30

# =============================================================================
# PARSING SYSTEM
# =============================================================================
# Enable/disable automatic parsing of game results (optional, default: false)
# When enabled, the bot monitors configured channels for game results
# and automatically awards points to users based on their performance
# Set to 'true' to enable, 'false' to disable
# Note: Requires proper parser configuration in database
PARSING_ENABLED=false

# Parsing check interval in seconds (optional, default: 60)
# How frequently the bot checks for new messages to parse
# Lower values = more responsive but higher CPU usage
# Recommended: 30-120 seconds depending on game activity
# Example: 60 means check every minute
PARSING_CHECK_INTERVAL=60

# =============================================================================
# LOGGING
# =============================================================================
# Logging level (optional, default: INFO)
# Controls verbosity of log output
# - DEBUG: Very detailed, includes all operations (use for troubleshooting)
# - INFO: General information about bot operations (recommended for production)
# - WARNING: Only warnings and errors (minimal logging)
# - ERROR: Only errors and critical issues
# - CRITICAL: Only critical failures that stop the bot
# Valid values: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (optional, default: console only)
# If specified, logs are written to this file in addition to console
# The directory will be created automatically if it doesn't exist
# Supports absolute paths or relative to project root
# Example: logs/bot.log, /var/log/telegram-bot/bot.log
# Note: Log rotation is handled automatically (daily rotation, 7 days retention)
LOG_FILE=logs/bot.log

# Enable structured logging in JSON format (optional, default: false)
# When enabled, logs are output as JSON for easier parsing by log aggregators
# Useful for production environments with centralized logging (ELK, Splunk, etc.)
# Set to 'true' for JSON format, 'false' for human-readable format
STRUCTURED_LOGGING=false

# =============================================================================
# BACKGROUND TASKS
# =============================================================================
# Background task check interval in seconds (optional, default: 300)
# Controls how often periodic maintenance tasks run
# Tasks include: database cleanup, statistics updates, cache invalidation
# Lower values = more frequent checks but higher resource usage
# Recommended: 300-600 seconds (5-10 minutes)
# Example: 300 = check every 5 minutes
TASK_CHECK_INTERVAL=300

# Enable automatic database backups (optional, default: true)
# When enabled, creates periodic backups of the database
# Backups are stored in data/backups/ directory
# Highly recommended for production environments
# Set to 'true' to enable, 'false' to disable
BACKUP_ENABLED=true

# Backup interval in seconds (optional, default: 86400)
# How often to create a new database backup
# 86400 = 24 hours (daily backup)
# 43200 = 12 hours (twice daily)
# 3600 = 1 hour (hourly, for critical systems)
BACKUP_INTERVAL=86400

# Number of backups to keep (optional, default: 7)
# Older backups are automatically deleted to save disk space
# Example: 7 = keep last 7 backups (1 week with daily backups)
# Recommended: 7-30 depending on available disk space
BACKUP_RETENTION=7

# =============================================================================
# SECURITY
# =============================================================================
# Enable rate limiting (optional, default: true)
# Protects the bot from spam and abuse by limiting requests per user
# When a user exceeds the limit, they receive a cooldown message
# Recommended: Keep enabled in production to prevent abuse
# Set to 'true' to enable, 'false' to disable
RATE_LIMIT_ENABLED=true

# Maximum requests per user per minute (optional, default: 20)
# How many commands/messages a user can send within 60 seconds
# Adjust based on your bot's expected usage patterns
# Too low = legitimate users get rate limited
# Too high = less protection against spam
# Recommended: 10-30 for normal bots, 50+ for high-interaction bots
RATE_LIMIT_MAX_REQUESTS=20

# Session timeout in seconds (optional, default: 3600)
# How long user sessions remain active without interaction
# After timeout, user may need to re-authenticate for certain actions
# 3600 = 1 hour, 7200 = 2 hours, 86400 = 24 hours
# Shorter timeout = better security, longer timeout = better UX
SESSION_TIMEOUT=3600

# =============================================================================
# FEATURES
# =============================================================================
# Feature flags to enable/disable specific bot functionality (all optional)
# Useful for gradual rollouts, A/B testing, or disabling broken features
# Set to 'true' to enable, 'false' to disable
# When disabled, related commands return "feature not available" message

# Enable shop system where users can spend points (optional, default: true)
# Includes: /shop, /buy, /inventory commands
SHOP_ENABLED=true

# Enable game-related commands and point tracking (optional, default: true)
# Includes: Game result parsing, leaderboards, statistics
GAMES_ENABLED=true

# Enable achievement/badge system (optional, default: true)
# Users earn achievements for milestones and special actions
ACHIEVEMENTS_ENABLED=true

# Enable social features (optional, default: true)
# Includes: User profiles, friend lists, gifting points
SOCIAL_FEATURES_ENABLED=true

# Enable D&D (Dungeons & Dragons) system (optional, default: false)
# Experimental feature for role-playing game mechanics
# Note: Currently in development, may be unstable
DND_SYSTEM_ENABLED=false

# =============================================================================
# NOTIFICATIONS
# =============================================================================
# Enable admin notifications for errors (optional, default: true)
# When enabled, critical errors are sent to ADMIN_TELEGRAM_ID via Telegram
# Helps administrators quickly respond to issues
# Includes: Unhandled exceptions, database errors, API failures
# Set to 'true' to enable, 'false' to disable
ADMIN_NOTIFICATIONS_ENABLED=true

# Notification cooldown in seconds (optional, default: 300)
# Prevents spam when the same error occurs repeatedly
# Only one notification per error type is sent within this time window
# Example: 300 = max one notification per error type every 5 minutes
# Recommended: 300-900 seconds (5-15 minutes)
# Set to 0 to disable cooldown (not recommended)
NOTIFICATION_COOLDOWN=300

# =============================================================================
# PERFORMANCE
# =============================================================================
# Enable caching for frequently accessed data (optional, default: false)
# Caching improves response time and reduces database load
# Recommended for bots with 100+ active users
# Set to 'true' to enable, 'false' to disable
CACHE_ENABLED=false

# Cache backend type (optional, default: memory)
# - memory: In-process cache, fast but not shared between instances
# - redis: External Redis server, slower but shared and persistent
# Use 'memory' for single-instance deployments
# Use 'redis' for multi-instance/distributed deployments
# Valid values: memory, redis
CACHE_BACKEND=memory

# Redis URL for caching (REQUIRED if CACHE_BACKEND=redis)
# Connection string for Redis server
# Format: redis://<host>:<port>/<database>
# With password: redis://:password@host:port/db
# With SSL: rediss://host:port/db
# Example: redis://localhost:6379/0
# Note: Requires Redis server to be running
REDIS_URL=redis://localhost:6379/0

# Cache TTL (Time To Live) in seconds (optional, default: 3600)
# How long cached data remains valid before being refreshed
# 3600 = 1 hour, 1800 = 30 minutes, 300 = 5 minutes
# Lower values = more up-to-date data but more database queries
# Higher values = better performance but potentially stale data
# Recommended: 300-3600 depending on data volatility
CACHE_TTL=3600

# =============================================================================
# DEVELOPMENT
# =============================================================================
# Enable debug mode (optional, auto-enabled when ENV=development)
# When enabled, shows detailed error messages and full stack traces
# Also enables additional logging and development tools
# WARNING: Never enable in production - exposes sensitive information
# Set to 'true' to enable, 'false' to disable
DEBUG=false

# Enable hot reload (optional, default: false, development only)
# Automatically restarts the bot when code changes are detected
# Useful during development to see changes immediately
# WARNING: Only use in development - causes instability in production
# Requires watchdog package: pip install watchdog
# Set to 'true' to enable, 'false' to disable
HOT_RELOAD=false

# Test mode (optional, auto-enabled when ENV=test)
# When enabled, uses in-memory database and mocks external services
# Prevents test data from polluting production database
# Automatically enabled by test runners (pytest)
# Manual override rarely needed
# Set to 'true' to enable, 'false' to disable
TEST_MODE=false
